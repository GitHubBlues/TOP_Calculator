<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator">
        <div class="screen-calculation"></div>
        <div class="screen-result"></div>
        <div class="upper-controls">
            <div class="btn-upper" id='keyClear'>clear</div>
            <div class="btn-upper" id='keyDelete'>delete</div> 
            <div class="btn-operator" id='keySum'>+</div>                 
        </div>
        <div class="btn-small">
            <div class="btn-digit" id='key7'>7</div>
            <div class="btn-digit" id='key8'>8</div>    
            <div class="btn-digit" id='key9'>9</div>  
            <div class="btn-operator" id='keySubtract'>-</div>
        </div>         
        <div class="btn-small">
            <div class="btn-digit" id='key4'>4</div>
            <div class="btn-digit" id='key5'>5</div>    
            <div class="btn-digit" id='key6'>6</div>  
            <div class="btn-operator" id='keyMultiply'>*</div>
        </div>       
        <div class="btn-small">
            <div class="btn-digit" id='key1'>1</div>
            <div class="btn-digit" id='key2'>2</div>    
            <div class="btn-digit" id='key3'>3</div>  
            <div class="btn-operator" id='keyDivide'>/</div>  
        </div>     
        <div class="btn-small">
            <div class="btn-digit" id='key0'>0</div> 
            <div class="btn-operator" id='keyPoint'>.</div>   
            <div class="btn-operator" id='keyEqual'>=</div> 
        </div>
    </div>

    <script>
        function addF(a,b){
            return Number(a) + Number(b);    
        }

        function subtractF(a,b){
            return Number(a) - Number(b); 
        }

        function multiplyF(a,b){
            return Number(a) * Number(b);    
        }

        function divideF(a,b){
            return Number(a)/Number(b);
        }
        
        function operate(number1, number2, operation){
            if (operation == "add"){
                return addF(number1, number2);
            }else if (operation == "subtract"){
                return subtractF(number1, number2);
            }else if (operation == "multiply"){
                return multiplyF(number1, number2);
            }else if (operation == "divide"){
                return divideF(number1, number2);
            }else{

            }
        }
        
        let operand1_ = "";
        let operand2_ = "";
        let operator_ = "";
        let operatorSymbol = "";
        let operand1_provisional = "";
        let operatorB_ = false; 
        
        function processInputDigit(arg){
            if (operand1_provisional.length !==0){
                operand1_provisional = "";
                btnScreenResult.textContent = ""; 
                btnScreenCalc.textContent = "";     
            }
            if (operatorB_ == false){
                if (arg == "."){
                    if (/\./.test(operand1_)){
                        // console.log(/./.test(operand1_));
                        return; 
                    } else{
                        operand1_  += arg;
                        btnScreenResult.textContent = operand1_ ; 
                        btnScreenCalc.textContent = operand1_ ; 
                        // console.log("op1  " + operand1_);   
                    }
                } else if (arg == "delete"){ 
                    operand1_ = operand1_.slice(0, operand1_.length-1);
                    btnScreenResult.textContent = operand1_ ; 
                    btnScreenCalc.textContent = operand1_ ;
                } else {
                    operand1_  += arg;
                    btnScreenResult.textContent = operand1_ ; 
                    btnScreenCalc.textContent = operand1_ ;
                    // console.log("op1  " + operand1_);    
                }

            } else {
                if (arg == "."){
                    if (/\./.test(operand2_)){
                        console.log(/./.test(operand2_));
                        return; 
                    } else{
                        operand2_  += arg;
                        btnScreenResult.textContent = operand2_ ;
                        btnScreenCalc.textContent = operand1_.concat(operatorSymbol, operand2_); 
                        // console.log("op2  " + operand2_);   
                    }
                } else if (arg == "delete"){ 
                    operand2_ = operand2_.slice(0, operand2_.length-1);
                    btnScreenResult.textContent = operand2_ ; 
                    btnScreenCalc.textContent = operand1_.concat(operatorSymbol, operand2_); 
                } else {
                    operand2_  += arg;
                    btnScreenResult.textContent = operand2_ ; 
                    btnScreenCalc.textContent = operand1_.concat(operatorSymbol, operand2_); 
                    // console.log("op2  " + operand2_);    
                }
            }
        }

        function processInputOperator(arg){
            if (operand1_provisional.length !==0){
                //console.log(operand1_provisional);
                operand1_ = operand1_provisional;
                operand1_provisional = "";
                btnScreenCalc.textContent = operand1_;   
                btnScreenResult.textContent = operand1_;  
                //console.log(operand1_provisional); 
            }          

            if (operand1_.length ==0){
                console.log("first operand missing");    
            } else if (operand2_.length ==0) {
                operatorB_ = true; 
                operator_ = arg;
                switch (arg) {
                    case "add":      
                        operatorSymbol = " + ";
                        break;
                    case "subtract": 
                        operatorSymbol = " - ";
                        break;
                    case "multiply": 
                        operatorSymbol = " * ";
                        break;
                    case "divide":    
                        operatorSymbol = " / ";  
                        break;
                }
                btnScreenCalc.textContent = operand1_.concat(operatorSymbol);
            } else{
                let result = operate(operand1_, operand2_, operator_); 
                btnScreenResult.textContent = result; 
                operand1_ = result.toString();
                operatorB_ = true; 
                operator_ = arg;
                operand2_ = "";
                switch (arg) {
                    case "add":      
                        operatorSymbol = " + ";
                        break;
                    case "subtract": 
                        operatorSymbol = " - ";
                        break;
                    case "multiply": 
                        operatorSymbol = " * ";
                        break;
                    case "divide":    
                        operatorSymbol = " / ";  
                        break;                   
                    }
                btnScreenCalc.textContent = operand1_.concat(operatorSymbol);  
                
            }        
        }

        function processInputEqual(arg){
            if ( operand1_.length>0 && operand1_.length>0 && operatorB_ == true){
                let result = operate(operand1_, operand2_, operator_); 
                btnScreenResult.textContent = result; 
                btnScreenCalc.textContent = operand1_.concat(operatorSymbol + operand2_ + "=" + result); 
                operand1_ = "";
                operand2_ = "";
                operator_ = "";
                operatorSymbol = "";
                operand1_provisional = result.toString();
                operatorB_ = false;  
            } 
        }

        function processInputClear(){
            operand1_ = "";
            operand2_ = "";
            operator_ = "";
            operand1_provisional = "";
            operatorB_ = false; 
            btnScreenResult.textContent = "" ; 
            btnScreenCalc.textContent = "" ; 
        };

        const btn0 = document.querySelector("#key0");
        btn0.addEventListener("click", (e) => processInputDigit("0"));
        const btn1 = document.querySelector("#key1");
        btn1.addEventListener("click", (e) => processInputDigit("1"));
        const btn2 = document.querySelector("#key2");
        btn2.addEventListener("click", (e) => processInputDigit("2"));
        const btn3 = document.querySelector("#key3");
        btn3.addEventListener("click", (e) => processInputDigit("3"));
        const btn4 = document.querySelector("#key4");
        btn4.addEventListener("click", (e) => processInputDigit("4"));
        const btn5 = document.querySelector("#key5");
        btn5.addEventListener("click", (e) => processInputDigit("5"));
        const btn6 = document.querySelector("#key6");
        btn6.addEventListener("click", (e) => processInputDigit("6"));
        const btn7 = document.querySelector("#key7");
        btn7.addEventListener("click", (e) => processInputDigit("7"));
        const btn8 = document.querySelector("#key8");
        btn8.addEventListener("click", (e) => processInputDigit("8"));
        const btn9 = document.querySelector("#key9");
        btn9.addEventListener("click", (e) => processInputDigit("9"));

        const btnOp1 = document.querySelector("#keySum");
        btnOp1.addEventListener("click", (e) => processInputOperator("add"));
        const btnOp2 = document.querySelector("#keySubtract");
        btnOp2.addEventListener("click", (e) => processInputOperator("subtract"));
        const btnOp3 = document.querySelector("#keyMultiply");
        btnOp3.addEventListener("click", (e) => processInputOperator("multiply"));
        const btnOp4 = document.querySelector("#keyDivide");
        btnOp4.addEventListener("click", (e) => processInputOperator("divide"));
        const btnOp5 = document.querySelector("#keyEqual");
        btnOp5.addEventListener("click", (e) => processInputEqual("="));
        const btnOp6 = document.querySelector("#keyPoint");
        btnOp6.addEventListener("click", (e) => processInputDigit("."));
        const btnOp7 = document.querySelector("#keyClear");
        btnOp7.addEventListener("click", (e) => processInputClear("clear"));
        const btnOp8 = document.querySelector("#keyDelete");
        btnOp8.addEventListener("click", (e) => processInputDigit("delete"));

        const btnScreenResult = document.querySelector(".screen-result");
        const btnScreenCalc = document.querySelector(".screen-calculation");
        
        const keyboard = document.addEventListener("keydown", (e) => {
            const keycode = e.keyCode;
            if (keycode == "48" || keycode == "96"){
                processInputDigit("0");    
            } else if (keycode == "49" || keycode == "97"){
                processInputDigit("1");    
            } else if (keycode == "50" || keycode == "98"){
                processInputDigit("2");    
            } else if (keycode == "51" || keycode == "99"){
                processInputDigit("3");    
            } else if (keycode == "52" || keycode == "100"){
                processInputDigit("4");    
            } else if (keycode == "53" || keycode == "101"){
                processInputDigit("5");    
            } else if (keycode == "54" || keycode == "102"){
                processInputDigit("6");    
            } else if (keycode == "55" || keycode == "103"){
                processInputDigit("7");    
            } else if (keycode == "56" || keycode == "104"){
                processInputDigit("8");    
            } else if (keycode == "57" || keycode == "105"){
                processInputDigit("9");    
               
            } else if (keycode == "107"){
                processInputOperator("add");   
            } else if (keycode == "109"){
                processInputOperator("subtract");              
            } else if (keycode == "106"){
                processInputOperator("multiply"); 
            } else if (keycode == "111"){
                processInputOperator("divide") 
            } else if (keycode == "190"){
                processInputDigit(".");    
            } else if (keycode == "8"){
                processInputDigit("delete");    
            } else if (keycode == "61"){
                processInputEqual("=");
            } else if (keycode == "13"){
                processInputEqual("="); 
            } else if (keycode == "46"){
                processInputClear("clear");
            }                                  
        }); 

        // console.log(sumF(4,6)-10);
        // console.log(sumF(-4,6)-2);
        // console.log(subtractF(4,6)+2);
        // console.log(subtractF(4,-6)-10);
        // console.log(multiplyF(4,6)-24);
        // console.log(multiplyF(4,-6)+24);
        // console.log(divideF(40,6));
        // console.log(divideF(0.4,6));
        // console.log(divideF(4,0));
        // console.log(operate(4,6,"sum"));
        // console.log(operate(4,6,"subtract"));
        // console.log(operate(4,6,"multiply"));
        // console.log(operate(4,6,"divide"));
    </script>
</body>
</html>